"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ai/summarize/route";
exports.ids = ["app/api/ai/summarize/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fsummarize%2Froute&page=%2Fapi%2Fai%2Fsummarize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fsummarize%2Froute.ts&appDir=%2Fhome%2Frunner%2Fwork%2Fmon-app%2Fmon-app%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fwork%2Fmon-app%2Fmon-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fsummarize%2Froute&page=%2Fapi%2Fai%2Fsummarize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fsummarize%2Froute.ts&appDir=%2Fhome%2Frunner%2Fwork%2Fmon-app%2Fmon-app%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fwork%2Fmon-app%2Fmon-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_runner_work_mon_app_mon_app_src_app_api_ai_summarize_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/ai/summarize/route.ts */ \"(rsc)/./src/app/api/ai/summarize/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ai/summarize/route\",\n        pathname: \"/api/ai/summarize\",\n        filename: \"route\",\n        bundlePath: \"app/api/ai/summarize/route\"\n    },\n    resolvedPagePath: \"/home/runner/work/mon-app/mon-app/src/app/api/ai/summarize/route.ts\",\n    nextConfigOutput,\n    userland: _home_runner_work_mon_app_mon_app_src_app_api_ai_summarize_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ai/summarize/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhaSUyRnN1bW1hcml6ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWklMkZzdW1tYXJpemUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhaSUyRnN1bW1hcml6ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcnVubmVyJTJGd29yayUyRm1vbi1hcHAlMkZtb24tYXBwJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGcnVubmVyJTJGd29yayUyRm1vbi1hcHAlMkZtb24tYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNtQjtBQUNoRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3BlcGl0ZS1tYWlsLXByb3RvLz9kYzYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9ob21lL3J1bm5lci93b3JrL21vbi1hcHAvbW9uLWFwcC9zcmMvYXBwL2FwaS9haS9zdW1tYXJpemUvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FpL3N1bW1hcml6ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FpL3N1bW1hcml6ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYWkvc3VtbWFyaXplL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL2hvbWUvcnVubmVyL3dvcmsvbW9uLWFwcC9tb24tYXBwL3NyYy9hcHAvYXBpL2FpL3N1bW1hcml6ZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYWkvc3VtbWFyaXplL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fsummarize%2Froute&page=%2Fapi%2Fai%2Fsummarize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fsummarize%2Froute.ts&appDir=%2Fhome%2Frunner%2Fwork%2Fmon-app%2Fmon-app%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fwork%2Fmon-app%2Fmon-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/ai/summarize/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/ai/summarize/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_ai_cleanEmail__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/ai/cleanEmail */ \"(rsc)/./src/lib/ai/cleanEmail.ts\");\n/* harmony import */ var _lib_ai_provider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../lib/ai/provider */ \"(rsc)/./src/lib/ai/provider.ts\");\n\n\n\nconst runtime = \"nodejs\";\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        const subject = String(body?.subject || \"\");\n        const lang = body?.lang === \"en\" ? \"en\" : \"fr\";\n        let text = \"\";\n        if (body?.bodyText) text = String(body.bodyText);\n        else if (body?.bodyHtml) text = (0,_lib_ai_cleanEmail__WEBPACK_IMPORTED_MODULE_1__.stripHtml)(String(body.bodyHtml || \"\"));\n        else if (body?.text) text = String(body.text);\n        if (!text.trim() && !subject.trim()) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing email content\"\n            }, {\n                status: 400\n            });\n        }\n        const cleaned = (0,_lib_ai_cleanEmail__WEBPACK_IMPORTED_MODULE_1__.cleanEmailBody)({\n            subject,\n            text\n        });\n        const out = await (0,_lib_ai_provider__WEBPACK_IMPORTED_MODULE_2__.summarizeText)(cleaned, lang);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: true,\n            ...out\n        });\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: false,\n            error: e?.message || \"server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9haS9zdW1tYXJpemUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0Q7QUFDa0I7QUFDZDtBQUVyRCxNQUFNSSxVQUFVLFNBQVM7QUFFekIsZUFBZUMsS0FBS0MsR0FBZ0I7SUFDekMsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUQsSUFBSUUsSUFBSTtRQUMzQixNQUFNQyxVQUFVQyxPQUFPSCxNQUFNRSxXQUFXO1FBQ3hDLE1BQU1FLE9BQVFKLE1BQU1JLFNBQVMsT0FBTyxPQUFPO1FBRTNDLElBQUlDLE9BQU87UUFDWCxJQUFJTCxNQUFNTSxVQUFVRCxPQUFPRixPQUFPSCxLQUFLTSxRQUFRO2FBQzFDLElBQUlOLE1BQU1PLFVBQVVGLE9BQU9YLDZEQUFTQSxDQUFDUyxPQUFPSCxLQUFLTyxRQUFRLElBQUk7YUFDN0QsSUFBSVAsTUFBTUssTUFBTUEsT0FBT0YsT0FBT0gsS0FBS0ssSUFBSTtRQUU1QyxJQUFJLENBQUNBLEtBQUtHLElBQUksTUFBTSxDQUFDTixRQUFRTSxJQUFJLElBQUk7WUFDbkMsT0FBT2YscURBQVlBLENBQUNRLElBQUksQ0FBQztnQkFBRVEsT0FBTztZQUF3QixHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDN0U7UUFFQSxNQUFNQyxVQUFVaEIsa0VBQWNBLENBQUM7WUFBRU87WUFBU0c7UUFBSztRQUMvQyxNQUFNTyxNQUFNLE1BQU1oQiwrREFBYUEsQ0FBQ2UsU0FBU1A7UUFFekMsT0FBT1gscURBQVlBLENBQUNRLElBQUksQ0FBQztZQUFFWSxJQUFJO1lBQU0sR0FBR0QsR0FBRztRQUFDO0lBQzlDLEVBQUUsT0FBT0UsR0FBUTtRQUNmLE9BQU9yQixxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO1lBQUVZLElBQUk7WUFBT0osT0FBT0ssR0FBR0MsV0FBVztRQUFlLEdBQUc7WUFBRUwsUUFBUTtRQUFJO0lBQzdGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wZXBpdGUtbWFpbC1wcm90by8uL3NyYy9hcHAvYXBpL2FpL3N1bW1hcml6ZS9yb3V0ZS50cz80MzE0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgc3RyaXBIdG1sLCBjbGVhbkVtYWlsQm9keSB9IGZyb20gXCIuLi8uLi8uLi8uLi9saWIvYWkvY2xlYW5FbWFpbFwiO1xyXG5pbXBvcnQgeyBzdW1tYXJpemVUZXh0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2xpYi9haS9wcm92aWRlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSBcIm5vZGVqc1wiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBTdHJpbmcoYm9keT8uc3ViamVjdCB8fCBcIlwiKTtcclxuICAgIGNvbnN0IGxhbmcgPSAoYm9keT8ubGFuZyA9PT0gXCJlblwiID8gXCJlblwiIDogXCJmclwiKSBhcyBcImZyXCIgfCBcImVuXCI7XHJcblxyXG4gICAgbGV0IHRleHQgPSBcIlwiO1xyXG4gICAgaWYgKGJvZHk/LmJvZHlUZXh0KSB0ZXh0ID0gU3RyaW5nKGJvZHkuYm9keVRleHQpO1xyXG4gICAgZWxzZSBpZiAoYm9keT8uYm9keUh0bWwpIHRleHQgPSBzdHJpcEh0bWwoU3RyaW5nKGJvZHkuYm9keUh0bWwgfHwgXCJcIikpO1xyXG4gICAgZWxzZSBpZiAoYm9keT8udGV4dCkgdGV4dCA9IFN0cmluZyhib2R5LnRleHQpO1xyXG5cclxuICAgIGlmICghdGV4dC50cmltKCkgJiYgIXN1YmplY3QudHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk1pc3NpbmcgZW1haWwgY29udGVudFwiIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2xlYW5lZCA9IGNsZWFuRW1haWxCb2R5KHsgc3ViamVjdCwgdGV4dCB9KTtcclxuICAgIGNvbnN0IG91dCA9IGF3YWl0IHN1bW1hcml6ZVRleHQoY2xlYW5lZCwgbGFuZyk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgb2s6IHRydWUsIC4uLm91dCB9KTtcclxuICB9IGNhdGNoIChlOiBhbnkpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG9rOiBmYWxzZSwgZXJyb3I6IGU/Lm1lc3NhZ2UgfHwgXCJzZXJ2ZXIgZXJyb3JcIiB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJzdHJpcEh0bWwiLCJjbGVhbkVtYWlsQm9keSIsInN1bW1hcml6ZVRleHQiLCJydW50aW1lIiwiUE9TVCIsInJlcSIsImJvZHkiLCJqc29uIiwic3ViamVjdCIsIlN0cmluZyIsImxhbmciLCJ0ZXh0IiwiYm9keVRleHQiLCJib2R5SHRtbCIsInRyaW0iLCJlcnJvciIsInN0YXR1cyIsImNsZWFuZWQiLCJvdXQiLCJvayIsImUiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/ai/summarize/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/ai/cleanEmail.ts":
/*!**********************************!*\
  !*** ./src/lib/ai/cleanEmail.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cleanEmailBody: () => (/* binding */ cleanEmailBody),\n/* harmony export */   stripHtml: () => (/* binding */ stripHtml)\n/* harmony export */ });\nfunction stripHtml(html) {\n    try {\n        const tmp = globalThis.document ? document.createElement(\"div\") : null;\n        if (tmp) {\n            tmp.innerHTML = html;\n            return tmp.textContent || tmp.innerText || \"\";\n        }\n        // fallback SSR\n        return html.replace(/<style[\\s\\S]*?<\\/style>/gi, \" \").replace(/<script[\\s\\S]*?<\\/script>/gi, \" \").replace(/<[^>]+>/g, \" \").replace(/\\s+/g, \" \").trim();\n    } catch  {\n        return html.replace(/<[^>]+>/g, \" \");\n    }\n}\nfunction cleanEmailBody({ subject, text }) {\n    let t = (text || \"\").replace(/\\r/g, \"\");\n    // supprime les citations style \"On Mon, someone wrote:\" et lignes commençant par \">\"\n    t = t.split(\"\\n\").filter((line)=>{\n        const l = line.trim();\n        if (!l) return true;\n        if (l.startsWith(\">\")) return false;\n        if (/^on .*wrote:$/i.test(l)) return false;\n        if (/^le .* a écrit *:$/i.test(l)) return false;\n        if (/^from:|^de *:/i.test(l)) return true;\n        return true;\n    }).join(\"\\n\");\n    // retirer signatures courantes\n    const sigIdx = t.indexOf(\"\\n--\\n\") >= 0 ? t.indexOf(\"\\n--\\n\") : t.toLowerCase().indexOf(\"\\ncordialement\") >= 0 ? t.toLowerCase().indexOf(\"\\ncordialement\") : -1;\n    if (sigIdx >= 0) t = t.slice(0, sigIdx);\n    // compacter\n    t = t.replace(/\\n{3,}/g, \"\\n\\n\").trim();\n    // préfixer sujet si utile\n    if (subject && !t.toLowerCase().includes(subject.toLowerCase())) {\n        t = `Sujet: ${subject}\\n\\n${t}`;\n    }\n    return t;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FpL2NsZWFuRW1haWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTyxTQUFTQSxVQUFVQyxJQUFZO0lBQ3BDLElBQUk7UUFDRixNQUFNQyxNQUFNQyxXQUFXQyxRQUFRLEdBQUdBLFNBQVNDLGFBQWEsQ0FBQyxTQUFTO1FBQ2xFLElBQUlILEtBQUs7WUFDUEEsSUFBSUksU0FBUyxHQUFHTDtZQUNoQixPQUFPQyxJQUFJSyxXQUFXLElBQUlMLElBQUlNLFNBQVMsSUFBSTtRQUM3QztRQUNBLGVBQWU7UUFDZixPQUFPUCxLQUNKUSxPQUFPLENBQUMsNkJBQTZCLEtBQ3JDQSxPQUFPLENBQUMsK0JBQStCLEtBQ3ZDQSxPQUFPLENBQUMsWUFBWSxLQUNwQkEsT0FBTyxDQUFDLFFBQVEsS0FDaEJDLElBQUk7SUFDVCxFQUFFLE9BQU07UUFDTixPQUFPVCxLQUFLUSxPQUFPLENBQUMsWUFBWTtJQUNsQztBQUNGO0FBRU8sU0FBU0UsZUFBZSxFQUFFQyxPQUFPLEVBQUVDLElBQUksRUFBc0M7SUFDbEYsSUFBSUMsSUFBSSxDQUFDRCxRQUFRLEVBQUMsRUFBR0osT0FBTyxDQUFDLE9BQU87SUFDcEMscUZBQXFGO0lBQ3JGSyxJQUFJQSxFQUNEQyxLQUFLLENBQUMsTUFDTkMsTUFBTSxDQUFDLENBQUNDO1FBQ1AsTUFBTUMsSUFBSUQsS0FBS1AsSUFBSTtRQUNuQixJQUFJLENBQUNRLEdBQUcsT0FBTztRQUNmLElBQUlBLEVBQUVDLFVBQVUsQ0FBQyxNQUFNLE9BQU87UUFDOUIsSUFBSSxpQkFBaUJDLElBQUksQ0FBQ0YsSUFBSSxPQUFPO1FBQ3JDLElBQUksc0JBQXNCRSxJQUFJLENBQUNGLElBQUksT0FBTztRQUMxQyxJQUFJLGlCQUFpQkUsSUFBSSxDQUFDRixJQUFJLE9BQU87UUFDckMsT0FBTztJQUNULEdBQ0NHLElBQUksQ0FBQztJQUVSLCtCQUErQjtJQUMvQixNQUFNQyxTQUNKUixFQUFFUyxPQUFPLENBQUMsYUFBYSxJQUFJVCxFQUFFUyxPQUFPLENBQUMsWUFDckNULEVBQUVVLFdBQVcsR0FBR0QsT0FBTyxDQUFDLHFCQUFxQixJQUFJVCxFQUFFVSxXQUFXLEdBQUdELE9BQU8sQ0FBQyxvQkFDekUsQ0FBQztJQUNILElBQUlELFVBQVUsR0FBR1IsSUFBSUEsRUFBRVcsS0FBSyxDQUFDLEdBQUdIO0lBRWhDLFlBQVk7SUFDWlIsSUFBSUEsRUFBRUwsT0FBTyxDQUFDLFdBQVcsUUFBUUMsSUFBSTtJQUVyQywwQkFBMEI7SUFDMUIsSUFBSUUsV0FBVyxDQUFDRSxFQUFFVSxXQUFXLEdBQUdFLFFBQVEsQ0FBQ2QsUUFBUVksV0FBVyxLQUFLO1FBQy9EVixJQUFJLENBQUMsT0FBTyxFQUFFRixRQUFRLElBQUksRUFBRUUsRUFBRSxDQUFDO0lBQ2pDO0lBQ0EsT0FBT0E7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3BlcGl0ZS1tYWlsLXByb3RvLy4vc3JjL2xpYi9haS9jbGVhbkVtYWlsLnRzPzYxNGYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHN0cmlwSHRtbChodG1sOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdG1wID0gZ2xvYmFsVGhpcy5kb2N1bWVudCA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikgOiBudWxsO1xyXG4gICAgaWYgKHRtcCkge1xyXG4gICAgICB0bXAuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgICAgcmV0dXJuIHRtcC50ZXh0Q29udGVudCB8fCB0bXAuaW5uZXJUZXh0IHx8IFwiXCI7XHJcbiAgICB9XHJcbiAgICAvLyBmYWxsYmFjayBTU1JcclxuICAgIHJldHVybiBodG1sXHJcbiAgICAgIC5yZXBsYWNlKC88c3R5bGVbXFxzXFxTXSo/PFxcL3N0eWxlPi9naSwgXCIgXCIpXHJcbiAgICAgIC5yZXBsYWNlKC88c2NyaXB0W1xcc1xcU10qPzxcXC9zY3JpcHQ+L2dpLCBcIiBcIilcclxuICAgICAgLnJlcGxhY2UoLzxbXj5dKz4vZywgXCIgXCIpXHJcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxyXG4gICAgICAudHJpbSgpO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIGh0bWwucmVwbGFjZSgvPFtePl0rPi9nLCBcIiBcIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xlYW5FbWFpbEJvZHkoeyBzdWJqZWN0LCB0ZXh0IH06IHsgc3ViamVjdD86IHN0cmluZzsgdGV4dDogc3RyaW5nIH0pIHtcclxuICBsZXQgdCA9ICh0ZXh0IHx8IFwiXCIpLnJlcGxhY2UoL1xcci9nLCBcIlwiKTtcclxuICAvLyBzdXBwcmltZSBsZXMgY2l0YXRpb25zIHN0eWxlIFwiT24gTW9uLCBzb21lb25lIHdyb3RlOlwiIGV0IGxpZ25lcyBjb21tZW7Dp2FudCBwYXIgXCI+XCJcclxuICB0ID0gdFxyXG4gICAgLnNwbGl0KFwiXFxuXCIpXHJcbiAgICAuZmlsdGVyKChsaW5lKSA9PiB7XHJcbiAgICAgIGNvbnN0IGwgPSBsaW5lLnRyaW0oKTtcclxuICAgICAgaWYgKCFsKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgaWYgKGwuc3RhcnRzV2l0aChcIj5cIikpIHJldHVybiBmYWxzZTtcclxuICAgICAgaWYgKC9eb24gLip3cm90ZTokL2kudGVzdChsKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBpZiAoL15sZSAuKiBhIMOpY3JpdCAqOiQvaS50ZXN0KGwpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmICgvXmZyb206fF5kZSAqOi9pLnRlc3QobCkpIHJldHVybiB0cnVlO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0pXHJcbiAgICAuam9pbihcIlxcblwiKTtcclxuXHJcbiAgLy8gcmV0aXJlciBzaWduYXR1cmVzIGNvdXJhbnRlc1xyXG4gIGNvbnN0IHNpZ0lkeCA9XHJcbiAgICB0LmluZGV4T2YoXCJcXG4tLVxcblwiKSA+PSAwID8gdC5pbmRleE9mKFwiXFxuLS1cXG5cIikgOlxyXG4gICAgdC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJcXG5jb3JkaWFsZW1lbnRcIikgPj0gMCA/IHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiXFxuY29yZGlhbGVtZW50XCIpIDpcclxuICAgIC0xO1xyXG4gIGlmIChzaWdJZHggPj0gMCkgdCA9IHQuc2xpY2UoMCwgc2lnSWR4KTtcclxuXHJcbiAgLy8gY29tcGFjdGVyXHJcbiAgdCA9IHQucmVwbGFjZSgvXFxuezMsfS9nLCBcIlxcblxcblwiKS50cmltKCk7XHJcblxyXG4gIC8vIHByw6lmaXhlciBzdWpldCBzaSB1dGlsZVxyXG4gIGlmIChzdWJqZWN0ICYmICF0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc3ViamVjdC50b0xvd2VyQ2FzZSgpKSkge1xyXG4gICAgdCA9IGBTdWpldDogJHtzdWJqZWN0fVxcblxcbiR7dH1gO1xyXG4gIH1cclxuICByZXR1cm4gdDtcclxufSJdLCJuYW1lcyI6WyJzdHJpcEh0bWwiLCJodG1sIiwidG1wIiwiZ2xvYmFsVGhpcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInRleHRDb250ZW50IiwiaW5uZXJUZXh0IiwicmVwbGFjZSIsInRyaW0iLCJjbGVhbkVtYWlsQm9keSIsInN1YmplY3QiLCJ0ZXh0IiwidCIsInNwbGl0IiwiZmlsdGVyIiwibGluZSIsImwiLCJzdGFydHNXaXRoIiwidGVzdCIsImpvaW4iLCJzaWdJZHgiLCJpbmRleE9mIiwidG9Mb3dlckNhc2UiLCJzbGljZSIsImluY2x1ZGVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/ai/cleanEmail.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/ai/provider.ts":
/*!********************************!*\
  !*** ./src/lib/ai/provider.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   summarizeText: () => (/* binding */ summarizeText)\n/* harmony export */ });\nasync function summarizeText(text, langHint = \"fr\") {\n    const key = process.env.OPENAI_API_KEY || process.env.NEXT_PUBLIC_OPENAI_API_KEY;\n    if (!key) return localSummarize(text, langHint);\n    try {\n        const res = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: `Bearer ${key}`\n            },\n            body: JSON.stringify({\n                model: \"gpt-4o-mini\",\n                temperature: 0.2,\n                response_format: {\n                    type: \"json_object\"\n                },\n                messages: [\n                    {\n                        role: \"system\",\n                        content: `Tu es un assistant concis. Résume l'email en ${langHint === \"fr\" ? \"fran\\xe7ais\" : \"anglais\"}.\r\nRenvoie un JSON avec les clés:\r\n- summary (5–8 phrases max, clair, contextuel)\r\n- highlights (3–6 puces d’informations clés)\r\n- actions (0–5 tâches/action items extraites, impératif)\r\n`\n                    },\n                    {\n                        role: \"user\",\n                        content: text.slice(0, 20000)\n                    }\n                ]\n            })\n        });\n        if (!res.ok) throw new Error(await res.text());\n        const data = await res.json();\n        const content = data?.choices?.[0]?.message?.content || \"{}\";\n        const parsed = JSON.parse(content);\n        return {\n            summary: String(parsed.summary || \"\").trim(),\n            highlights: Array.isArray(parsed.highlights) ? parsed.highlights.slice(0, 8) : [],\n            actions: Array.isArray(parsed.actions) ? parsed.actions.slice(0, 8) : [],\n            language: langHint\n        };\n    } catch  {\n        return localSummarize(text, langHint);\n    }\n}\nfunction localSummarize(text, lang) {\n    const lines = text.split(/\\n+/).map((l)=>l.trim()).filter(Boolean);\n    const first = lines.slice(0, 5).join(\" \");\n    const bullets = lines.slice(0, 6).map((l)=>\"• \" + l).slice(0, 4);\n    const actions = lines.filter((l)=>/(action|to[- ]do|tâche|deadline|due|deliver|livrable|merci de|please)/i.test(l)).slice(0, 5).map((l)=>l.replace(/^[-•*\\s]+/, \"\").trim());\n    return {\n        summary: first || (lang === \"fr\" ? \"R\\xe9sum\\xe9 indisponible.\" : \"Summary unavailable.\"),\n        highlights: bullets,\n        actions,\n        language: lang\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FpL3Byb3ZpZGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFPTyxlQUFlQSxjQUFjQyxJQUFZLEVBQUVDLFdBQXdCLElBQUk7SUFDNUUsTUFBTUMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxjQUFjLElBQUlGLFFBQVFDLEdBQUcsQ0FBQ0UsMEJBQTBCO0lBQ2hGLElBQUksQ0FBQ0osS0FBSyxPQUFPSyxlQUFlUCxNQUFNQztJQUV0QyxJQUFJO1FBQ0YsTUFBTU8sTUFBTSxNQUFNQyxNQUFNLDhDQUE4QztZQUNwRUMsUUFBUTtZQUNSQyxTQUFTO2dCQUFFLGdCQUFnQjtnQkFBb0JDLGVBQWUsQ0FBQyxPQUFPLEVBQUVWLElBQUksQ0FBQztZQUFDO1lBQzlFVyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7Z0JBQ25CQyxPQUFPO2dCQUNQQyxhQUFhO2dCQUNiQyxpQkFBaUI7b0JBQUVDLE1BQU07Z0JBQWM7Z0JBQ3ZDQyxVQUFVO29CQUNSO3dCQUNFQyxNQUFNO3dCQUNOQyxTQUNFLENBQUMsNkNBQTZDLEVBQUVyQixhQUFhLE9BQU8sZ0JBQWEsVUFBVTs7Ozs7QUFLekcsQ0FBQztvQkFDUztvQkFDQTt3QkFBRW9CLE1BQU07d0JBQVFDLFNBQVN0QixLQUFLdUIsS0FBSyxDQUFDLEdBQUc7b0JBQU87aUJBQy9DO1lBQ0g7UUFDRjtRQUNBLElBQUksQ0FBQ2YsSUFBSWdCLEVBQUUsRUFBRSxNQUFNLElBQUlDLE1BQU0sTUFBTWpCLElBQUlSLElBQUk7UUFDM0MsTUFBTTBCLE9BQU8sTUFBTWxCLElBQUltQixJQUFJO1FBQzNCLE1BQU1MLFVBQVVJLE1BQU1FLFNBQVMsQ0FBQyxFQUFFLEVBQUVDLFNBQVNQLFdBQVc7UUFDeEQsTUFBTVEsU0FBU2hCLEtBQUtpQixLQUFLLENBQUNUO1FBQzFCLE9BQU87WUFDTFUsU0FBU0MsT0FBT0gsT0FBT0UsT0FBTyxJQUFJLElBQUlFLElBQUk7WUFDMUNDLFlBQVlDLE1BQU1DLE9BQU8sQ0FBQ1AsT0FBT0ssVUFBVSxJQUFJTCxPQUFPSyxVQUFVLENBQUNaLEtBQUssQ0FBQyxHQUFHLEtBQUssRUFBRTtZQUNqRmUsU0FBU0YsTUFBTUMsT0FBTyxDQUFDUCxPQUFPUSxPQUFPLElBQUlSLE9BQU9RLE9BQU8sQ0FBQ2YsS0FBSyxDQUFDLEdBQUcsS0FBSyxFQUFFO1lBQ3hFZ0IsVUFBVXRDO1FBQ1o7SUFDRixFQUFFLE9BQU07UUFDTixPQUFPTSxlQUFlUCxNQUFNQztJQUM5QjtBQUNGO0FBRUEsU0FBU00sZUFBZVAsSUFBWSxFQUFFd0MsSUFBaUI7SUFDckQsTUFBTUMsUUFBUXpDLEtBQUswQyxLQUFLLENBQUMsT0FBT0MsR0FBRyxDQUFDLENBQUNDLElBQU1BLEVBQUVWLElBQUksSUFBSVcsTUFBTSxDQUFDQztJQUM1RCxNQUFNQyxRQUFRTixNQUFNbEIsS0FBSyxDQUFDLEdBQUcsR0FBR3lCLElBQUksQ0FBQztJQUNyQyxNQUFNQyxVQUFVUixNQUFNbEIsS0FBSyxDQUFDLEdBQUcsR0FBR29CLEdBQUcsQ0FBQyxDQUFDQyxJQUFNLE9BQU9BLEdBQUdyQixLQUFLLENBQUMsR0FBRztJQUNoRSxNQUFNZSxVQUFVRyxNQUNiSSxNQUFNLENBQUMsQ0FBQ0QsSUFBTSx5RUFBeUVNLElBQUksQ0FBQ04sSUFDNUZyQixLQUFLLENBQUMsR0FBRyxHQUNUb0IsR0FBRyxDQUFDLENBQUNDLElBQU1BLEVBQUVPLE9BQU8sQ0FBQyxhQUFhLElBQUlqQixJQUFJO0lBQzdDLE9BQU87UUFDTEYsU0FBU2UsU0FBVVAsQ0FBQUEsU0FBUyxPQUFPLCtCQUF5QixzQkFBcUI7UUFDakZMLFlBQVljO1FBQ1pYO1FBQ0FDLFVBQVVDO0lBQ1o7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BlcGl0ZS1tYWlsLXByb3RvLy4vc3JjL2xpYi9haS9wcm92aWRlci50cz8zYTNmIl0sInNvdXJjZXNDb250ZW50IjpbInR5cGUgU3VtbWFyaXplT3V0cHV0ID0ge1xyXG4gIHN1bW1hcnk6IHN0cmluZztcclxuICBoaWdobGlnaHRzPzogc3RyaW5nW107XHJcbiAgYWN0aW9ucz86IHN0cmluZ1tdO1xyXG4gIGxhbmd1YWdlPzogc3RyaW5nO1xyXG59O1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1bW1hcml6ZVRleHQodGV4dDogc3RyaW5nLCBsYW5nSGludDogXCJmclwiIHwgXCJlblwiID0gXCJmclwiKTogUHJvbWlzZTxTdW1tYXJpemVPdXRwdXQ+IHtcclxuICBjb25zdCBrZXkgPSBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSB8fCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19PUEVOQUlfQVBJX0tFWTtcclxuICBpZiAoIWtleSkgcmV0dXJuIGxvY2FsU3VtbWFyaXplKHRleHQsIGxhbmdIaW50KTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiwgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2tleX1gIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBtb2RlbDogXCJncHQtNG8tbWluaVwiLFxyXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjIsXHJcbiAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6IFwianNvbl9vYmplY3RcIiB9LFxyXG4gICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHJvbGU6IFwic3lzdGVtXCIsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6XHJcbiAgICAgICAgICAgICAgYFR1IGVzIHVuIGFzc2lzdGFudCBjb25jaXMuIFLDqXN1bWUgbCdlbWFpbCBlbiAke2xhbmdIaW50ID09PSBcImZyXCIgPyBcImZyYW7Dp2Fpc1wiIDogXCJhbmdsYWlzXCJ9LlxyXG5SZW52b2llIHVuIEpTT04gYXZlYyBsZXMgY2zDqXM6XHJcbi0gc3VtbWFyeSAoNeKAkzggcGhyYXNlcyBtYXgsIGNsYWlyLCBjb250ZXh0dWVsKVxyXG4tIGhpZ2hsaWdodHMgKDPigJM2IHB1Y2VzIGTigJlpbmZvcm1hdGlvbnMgY2zDqXMpXHJcbi0gYWN0aW9ucyAoMOKAkzUgdMOiY2hlcy9hY3Rpb24gaXRlbXMgZXh0cmFpdGVzLCBpbXDDqXJhdGlmKVxyXG5gLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHRleHQuc2xpY2UoMCwgMjAwMDApIH0sXHJcbiAgICAgICAgXSxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhPy5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgXCJ7fVwiO1xyXG4gICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShjb250ZW50KTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1bW1hcnk6IFN0cmluZyhwYXJzZWQuc3VtbWFyeSB8fCBcIlwiKS50cmltKCksXHJcbiAgICAgIGhpZ2hsaWdodHM6IEFycmF5LmlzQXJyYXkocGFyc2VkLmhpZ2hsaWdodHMpID8gcGFyc2VkLmhpZ2hsaWdodHMuc2xpY2UoMCwgOCkgOiBbXSxcclxuICAgICAgYWN0aW9uczogQXJyYXkuaXNBcnJheShwYXJzZWQuYWN0aW9ucykgPyBwYXJzZWQuYWN0aW9ucy5zbGljZSgwLCA4KSA6IFtdLFxyXG4gICAgICBsYW5ndWFnZTogbGFuZ0hpbnQsXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIGxvY2FsU3VtbWFyaXplKHRleHQsIGxhbmdIaW50KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvY2FsU3VtbWFyaXplKHRleHQ6IHN0cmluZywgbGFuZzogXCJmclwiIHwgXCJlblwiKTogU3VtbWFyaXplT3V0cHV0IHtcclxuICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoL1xcbisvKS5tYXAoKGwpID0+IGwudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XHJcbiAgY29uc3QgZmlyc3QgPSBsaW5lcy5zbGljZSgwLCA1KS5qb2luKFwiIFwiKTtcclxuICBjb25zdCBidWxsZXRzID0gbGluZXMuc2xpY2UoMCwgNikubWFwKChsKSA9PiBcIuKAoiBcIiArIGwpLnNsaWNlKDAsIDQpO1xyXG4gIGNvbnN0IGFjdGlvbnMgPSBsaW5lc1xyXG4gICAgLmZpbHRlcigobCkgPT4gLyhhY3Rpb258dG9bLSBdZG98dMOiY2hlfGRlYWRsaW5lfGR1ZXxkZWxpdmVyfGxpdnJhYmxlfG1lcmNpIGRlfHBsZWFzZSkvaS50ZXN0KGwpKVxyXG4gICAgLnNsaWNlKDAsIDUpXHJcbiAgICAubWFwKChsKSA9PiBsLnJlcGxhY2UoL15bLeKAoipcXHNdKy8sIFwiXCIpLnRyaW0oKSk7XHJcbiAgcmV0dXJuIHtcclxuICAgIHN1bW1hcnk6IGZpcnN0IHx8IChsYW5nID09PSBcImZyXCIgPyBcIlLDqXN1bcOpIGluZGlzcG9uaWJsZS5cIiA6IFwiU3VtbWFyeSB1bmF2YWlsYWJsZS5cIiksXHJcbiAgICBoaWdobGlnaHRzOiBidWxsZXRzLFxyXG4gICAgYWN0aW9ucyxcclxuICAgIGxhbmd1YWdlOiBsYW5nLFxyXG4gIH07XHJcbn0iXSwibmFtZXMiOlsic3VtbWFyaXplVGV4dCIsInRleHQiLCJsYW5nSGludCIsImtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsIk5FWFRfUFVCTElDX09QRU5BSV9BUElfS0VZIiwibG9jYWxTdW1tYXJpemUiLCJyZXMiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2RlbCIsInRlbXBlcmF0dXJlIiwicmVzcG9uc2VfZm9ybWF0IiwidHlwZSIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJzbGljZSIsIm9rIiwiRXJyb3IiLCJkYXRhIiwianNvbiIsImNob2ljZXMiLCJtZXNzYWdlIiwicGFyc2VkIiwicGFyc2UiLCJzdW1tYXJ5IiwiU3RyaW5nIiwidHJpbSIsImhpZ2hsaWdodHMiLCJBcnJheSIsImlzQXJyYXkiLCJhY3Rpb25zIiwibGFuZ3VhZ2UiLCJsYW5nIiwibGluZXMiLCJzcGxpdCIsIm1hcCIsImwiLCJmaWx0ZXIiLCJCb29sZWFuIiwiZmlyc3QiLCJqb2luIiwiYnVsbGV0cyIsInRlc3QiLCJyZXBsYWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/ai/provider.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fsummarize%2Froute&page=%2Fapi%2Fai%2Fsummarize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fsummarize%2Froute.ts&appDir=%2Fhome%2Frunner%2Fwork%2Fmon-app%2Fmon-app%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fwork%2Fmon-app%2Fmon-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();