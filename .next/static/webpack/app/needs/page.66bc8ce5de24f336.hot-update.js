"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/needs/page",{

/***/ "(app-pages-browser)/./src/lib/needs/firestore.ts":
/*!************************************!*\
  !*** ./src/lib/needs/firestore.ts ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   approveRequest: function() { return /* binding */ approveRequest; },\n/* harmony export */   createNeedRequest: function() { return /* binding */ createNeedRequest; },\n/* harmony export */   executeRequest: function() { return /* binding */ executeRequest; },\n/* harmony export */   rejectRequest: function() { return /* binding */ rejectRequest; },\n/* harmony export */   submitNeedRequest: function() { return /* binding */ submitNeedRequest; },\n/* harmony export */   subscribeMyRequests: function() { return /* binding */ subscribeMyRequests; },\n/* harmony export */   subscribeQueueForRole: function() { return /* binding */ subscribeQueueForRole; }\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _lib_firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @lib/firebase */ \"(app-pages-browser)/./src/lib/firebase.ts\");\n\n\nfunction nowISO() {\n    return new Date().toISOString();\n}\nfunction me() {\n    const u = _lib_firebase__WEBPACK_IMPORTED_MODULE_1__.auth.currentUser;\n    return {\n        uid: (u === null || u === void 0 ? void 0 : u.uid) || \"anon\",\n        email: (u === null || u === void 0 ? void 0 : u.email) || \"\",\n        name: (u === null || u === void 0 ? void 0 : u.displayName) || ((u === null || u === void 0 ? void 0 : u.email) ? u.email.split(\"@\")[0] : \"User\")\n    };\n}\nasync function createNeedRequest(input) {\n    const db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getFirestore)();\n    var _input_amount, _input_currency, _input_justification, _input_attachments, _input_amount1, _input_currency1;\n    const ref = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(db, \"needRequests\"), {\n        title: input.title,\n        description: input.description,\n        amount: (_input_amount = input.amount) !== null && _input_amount !== void 0 ? _input_amount : null,\n        currency: (_input_currency = input.currency) !== null && _input_currency !== void 0 ? _input_currency : \"XOF\",\n        justification: (_input_justification = input.justification) !== null && _input_justification !== void 0 ? _input_justification : \"\",\n        attachments: (_input_attachments = input.attachments) !== null && _input_attachments !== void 0 ? _input_attachments : [],\n        createdBy: me(),\n        createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n        lastEventAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n        status: \"draft\",\n        approvals: [],\n        history: [\n            {\n                type: \"created\",\n                at: nowISO(),\n                by: me(),\n                data: {\n                    title: input.title,\n                    amount: (_input_amount1 = input.amount) !== null && _input_amount1 !== void 0 ? _input_amount1 : null,\n                    currency: (_input_currency1 = input.currency) !== null && _input_currency1 !== void 0 ? _input_currency1 : \"XOF\"\n                }\n            }\n        ]\n    });\n    return ref.id;\n}\nasync function submitNeedRequest(id) {\n    const db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getFirestore)();\n    const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(db, \"needRequests\", id);\n    // Pas de lecture préalable: on laisse les règles sécurité valider la transition\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(ref, {\n        status: \"submitted\",\n        lastEventAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n        history: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.arrayUnion)({\n            type: \"submitted\",\n            at: nowISO(),\n            by: me()\n        })\n    });\n}\nasync function approveRequest(id, role, comment) {\n    const db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getFirestore)();\n    const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(db, \"needRequests\", id);\n    // Calcul du prochain statut côté client (les règles valideront de toute façon)\n    const nextByRole = {\n        employee: \"submitted\",\n        manager: \"manager_approved\",\n        admin: \"admin_approved\",\n        finance: \"finance_approved\"\n    };\n    const to = nextByRole[role] || \"submitted\";\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(ref, {\n        status: to,\n        lastEventAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n        approvals: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.arrayUnion)({\n            role,\n            decision: \"approved\",\n            comment: comment || \"\",\n            at: nowISO(),\n            by: me()\n        }),\n        history: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.arrayUnion)({\n            type: \"approved_\".concat(role),\n            at: nowISO(),\n            by: me(),\n            data: {\n                comment: comment || \"\"\n            }\n        })\n    });\n}\nasync function rejectRequest(id, role, comment) {\n    const db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getFirestore)();\n    const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(db, \"needRequests\", id);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(ref, {\n        status: \"rejected\",\n        lastEventAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n        approvals: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.arrayUnion)({\n            role,\n            decision: \"rejected\",\n            comment: comment || \"\",\n            at: nowISO(),\n            by: me()\n        }),\n        history: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.arrayUnion)({\n            type: \"rejected_\".concat(role),\n            at: nowISO(),\n            by: me(),\n            data: {\n                comment: comment || \"\"\n            }\n        })\n    });\n}\nasync function executeRequest(id, details) {\n    const db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getFirestore)();\n    const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(db, \"needRequests\", id);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(ref, {\n        status: \"fulfilled\",\n        lastEventAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n        history: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.arrayUnion)({\n            type: \"executed\",\n            at: nowISO(),\n            by: me(),\n            data: details || {}\n        })\n    });\n}\n// Abonnements temps réel (UI)\nfunction subscribeMyRequests(uid, cb) {\n    const db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getFirestore)();\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(db, \"needRequests\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"createdBy.uid\", \"==\", uid), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"));\n    return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.onSnapshot)(q, (snap)=>{\n        cb(snap.docs.map((d)=>({\n                id: d.id,\n                ...d.data()\n            })));\n    }, (err)=>{\n        console.error(\"subscribeMyRequests error:\", err);\n        cb([]);\n    });\n}\nfunction subscribeQueueForRole(role, cb) {\n    const db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getFirestore)();\n    let qRef;\n    if (role === \"manager\") {\n        qRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(db, \"needRequests\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", \"submitted\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"));\n    } else if (role === \"admin\") {\n        qRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(db, \"needRequests\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", \"manager_approved\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"));\n    } else if (role === \"finance\") {\n        qRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(db, \"needRequests\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"in\", [\n            \"admin_approved\",\n            \"finance_approved\"\n        ]), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"));\n    } else {\n        qRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(db, \"needRequests\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", \"submitted\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"));\n    }\n    return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.onSnapshot)(qRef, (snap)=>{\n        cb(snap.docs.map((d)=>({\n                id: d.id,\n                ...d.data()\n            })));\n    }, (err)=>{\n        console.error(\"subscribeQueueForRole error:\", err);\n        cb([]);\n    });\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvbmVlZHMvZmlyZXN0b3JlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUc0QjtBQUNTO0FBR3JDLFNBQVNZO0lBQVcsT0FBTyxJQUFJQyxPQUFPQyxXQUFXO0FBQUk7QUFFckQsU0FBU0M7SUFDUCxNQUFNQyxJQUFJTCwrQ0FBSUEsQ0FBQ00sV0FBVztJQUMxQixPQUFPO1FBQ0xDLEtBQUtGLENBQUFBLGNBQUFBLHdCQUFBQSxFQUFHRSxHQUFHLEtBQUk7UUFDZkMsT0FBT0gsQ0FBQUEsY0FBQUEsd0JBQUFBLEVBQUdHLEtBQUssS0FBSTtRQUNuQkMsTUFBTUosQ0FBQUEsY0FBQUEsd0JBQUFBLEVBQUdLLFdBQVcsS0FBS0wsQ0FBQUEsQ0FBQUEsY0FBQUEsd0JBQUFBLEVBQUdHLEtBQUssSUFBR0gsRUFBRUcsS0FBSyxDQUFDRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxNQUFLO0lBQ25FO0FBQ0Y7QUFFTyxlQUFlQyxrQkFBa0JDLEtBT3ZDO0lBQ0MsTUFBTUMsS0FBS3pCLGdFQUFZQTtRQUlid0IsZUFDRUEsaUJBQ0tBLHNCQUNGQSxvQkFXMkJBLGdCQUFnQ0E7SUFqQjFFLE1BQU1FLE1BQU0sTUFBTXZCLDBEQUFNQSxDQUFDRCw4REFBVUEsQ0FBQ3VCLElBQUksaUJBQWlCO1FBQ3ZERSxPQUFPSCxNQUFNRyxLQUFLO1FBQ2xCQyxhQUFhSixNQUFNSSxXQUFXO1FBQzlCQyxRQUFRTCxDQUFBQSxnQkFBQUEsTUFBTUssTUFBTSxjQUFaTCwyQkFBQUEsZ0JBQWdCO1FBQ3hCTSxVQUFVTixDQUFBQSxrQkFBQUEsTUFBTU0sUUFBUSxjQUFkTiw2QkFBQUEsa0JBQWtCO1FBQzVCTyxlQUFlUCxDQUFBQSx1QkFBQUEsTUFBTU8sYUFBYSxjQUFuQlAsa0NBQUFBLHVCQUF1QjtRQUN0Q1EsYUFBYVIsQ0FBQUEscUJBQUFBLE1BQU1RLFdBQVcsY0FBakJSLGdDQUFBQSxxQkFBcUIsRUFBRTtRQUNw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QUFhO0lBQ25JLE9BQU87UUFDTDRELE9BQU85RCx5REFBS0EsQ0FBQ0wsOERBQVVBLENBQUN1QixJQUFJLGlCQUFpQmpCLHlEQUFLQSxDQUFDLFVBQVUsTUFBTSxjQUFjQywyREFBT0EsQ0FBQyxhQUFhO0lBQ3hHO0lBQ0EsT0FBT0gsOERBQVVBLENBQUMrRCxNQUFNLENBQUNSO1FBQ3ZCRixHQUFHRSxLQUFLQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDQyxJQUFPO2dCQUFFckIsSUFBSXFCLEVBQUVyQixFQUFFO2dCQUFFLEdBQUlxQixFQUFFdEIsSUFBSSxFQUFFO1lBQVM7SUFDNUQsR0FBRyxDQUFDdUI7UUFDRkMsUUFBUUMsS0FBSyxDQUFDLGdDQUFnQ0Y7UUFDOUNOLEdBQUcsRUFBRTtJQUNQO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9uZWVkcy9maXJlc3RvcmUudHM/MTE4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIGdldEZpcmVzdG9yZSwgc2VydmVyVGltZXN0YW1wLCBjb2xsZWN0aW9uLCBhZGREb2MsIGRvYywgdXBkYXRlRG9jLFxyXG4gIG9uU25hcHNob3QsIHF1ZXJ5LCB3aGVyZSwgb3JkZXJCeSwgYXJyYXlVbmlvblxyXG59IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcclxuaW1wb3J0IHsgYXV0aCB9IGZyb20gXCJAbGliL2ZpcmViYXNlXCI7XHJcbmltcG9ydCB0eXBlIHsgTmVlZFJlcXVlc3QsIE5lZWRSb2xlIH0gZnJvbSBcIkBsaWIvbmVlZHMvdHlwZXNcIjtcclxuXHJcbmZ1bmN0aW9uIG5vd0lTTygpIHsgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsgfVxyXG5cclxuZnVuY3Rpb24gbWUoKSB7XHJcbiAgY29uc3QgdSA9IGF1dGguY3VycmVudFVzZXI7XHJcbiAgcmV0dXJuIHtcclxuICAgIHVpZDogdT8udWlkIHx8IFwiYW5vblwiLFxyXG4gICAgZW1haWw6IHU/LmVtYWlsIHx8IFwiXCIsXHJcbiAgICBuYW1lOiB1Py5kaXNwbGF5TmFtZSB8fCAodT8uZW1haWwgPyB1LmVtYWlsLnNwbGl0KFwiQFwiKVswXSA6IFwiVXNlclwiKSxcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTmVlZFJlcXVlc3QoaW5wdXQ6IHtcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgYW1vdW50PzogbnVtYmVyO1xyXG4gIGN1cnJlbmN5Pzogc3RyaW5nO1xyXG4gIGp1c3RpZmljYXRpb24/OiBzdHJpbmc7XHJcbiAgYXR0YWNobWVudHM/OiBOZWVkUmVxdWVzdFtcImF0dGFjaG1lbnRzXCJdO1xyXG59KTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICBjb25zdCBkYiA9IGdldEZpcmVzdG9yZSgpO1xyXG4gIGNvbnN0IHJlZiA9IGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCBcIm5lZWRSZXF1ZXN0c1wiKSwge1xyXG4gICAgdGl0bGU6IGlucHV0LnRpdGxlLFxyXG4gICAgZGVzY3JpcHRpb246IGlucHV0LmRlc2NyaXB0aW9uLFxyXG4gICAgYW1vdW50OiBpbnB1dC5hbW91bnQgPz8gbnVsbCxcclxuICAgIGN1cnJlbmN5OiBpbnB1dC5jdXJyZW5jeSA/PyBcIlhPRlwiLFxyXG4gICAganVzdGlmaWNhdGlvbjogaW5wdXQuanVzdGlmaWNhdGlvbiA/PyBcIlwiLFxyXG4gICAgYXR0YWNobWVudHM6IGlucHV0LmF0dGFjaG1lbnRzID8/IFtdLFxyXG4gICAgY3JlYXRlZEJ5OiBtZSgpLFxyXG4gICAgY3JlYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSwgICAvLyB0b3AtbGV2ZWwgT0tcclxuICAgIGxhc3RFdmVudEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSwgLy8gdG9wLWxldmVsIE9LXHJcbiAgICBzdGF0dXM6IFwiZHJhZnRcIixcclxuICAgIGFwcHJvdmFsczogW10sXHJcbiAgICBoaXN0b3J5OiBbXHJcbiAgICAgIHtcclxuICAgICAgICB0eXBlOiBcImNyZWF0ZWRcIixcclxuICAgICAgICBhdDogbm93SVNPKCksICAgICAgICAgICAgICAgIC8vIFBhcyBkZSBzZXJ2ZXJUaW1lc3RhbXAoKSBkYW5zIHVuIGFycmF5XHJcbiAgICAgICAgYnk6IG1lKCksXHJcbiAgICAgICAgZGF0YTogeyB0aXRsZTogaW5wdXQudGl0bGUsIGFtb3VudDogaW5wdXQuYW1vdW50ID8/IG51bGwsIGN1cnJlbmN5OiBpbnB1dC5jdXJyZW5jeSA/PyBcIlhPRlwiIH0sXHJcbiAgICAgIH0sXHJcbiAgICBdLFxyXG4gIH0gYXMgT21pdDxOZWVkUmVxdWVzdCwgXCJpZFwiPik7XHJcbiAgcmV0dXJuIHJlZi5pZDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1Ym1pdE5lZWRSZXF1ZXN0KGlkOiBzdHJpbmcpIHtcclxuICBjb25zdCBkYiA9IGdldEZpcmVzdG9yZSgpO1xyXG4gIGNvbnN0IHJlZiA9IGRvYyhkYiwgXCJuZWVkUmVxdWVzdHNcIiwgaWQpO1xyXG4gIC8vIFBhcyBkZSBsZWN0dXJlIHByw6lhbGFibGU6IG9uIGxhaXNzZSBsZXMgcsOoZ2xlcyBzw6ljdXJpdMOpIHZhbGlkZXIgbGEgdHJhbnNpdGlvblxyXG4gIGF3YWl0IHVwZGF0ZURvYyhyZWYsIHtcclxuICAgIHN0YXR1czogXCJzdWJtaXR0ZWRcIixcclxuICAgIGxhc3RFdmVudEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuICAgIGhpc3Rvcnk6IGFycmF5VW5pb24oeyB0eXBlOiBcInN1Ym1pdHRlZFwiLCBhdDogbm93SVNPKCksIGJ5OiBtZSgpIH0pLFxyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwcm92ZVJlcXVlc3QoaWQ6IHN0cmluZywgcm9sZTogTmVlZFJvbGUsIGNvbW1lbnQ/OiBzdHJpbmcpIHtcclxuICBjb25zdCBkYiA9IGdldEZpcmVzdG9yZSgpO1xyXG4gIGNvbnN0IHJlZiA9IGRvYyhkYiwgXCJuZWVkUmVxdWVzdHNcIiwgaWQpO1xyXG5cclxuICAvLyBDYWxjdWwgZHUgcHJvY2hhaW4gc3RhdHV0IGPDtHTDqSBjbGllbnQgKGxlcyByw6hnbGVzIHZhbGlkZXJvbnQgZGUgdG91dGUgZmHDp29uKVxyXG4gIGNvbnN0IG5leHRCeVJvbGU6IFJlY29yZDxOZWVkUm9sZSwgc3RyaW5nPiA9IHtcclxuICAgIGVtcGxveWVlOiBcInN1Ym1pdHRlZFwiLCAgICAgIC8vIG5vbiB1dGlsaXPDqSBpY2lcclxuICAgIG1hbmFnZXI6IFwibWFuYWdlcl9hcHByb3ZlZFwiLFxyXG4gICAgYWRtaW46IFwiYWRtaW5fYXBwcm92ZWRcIixcclxuICAgIGZpbmFuY2U6IFwiZmluYW5jZV9hcHByb3ZlZFwiLFxyXG4gIH07XHJcbiAgY29uc3QgdG8gPSBuZXh0QnlSb2xlW3JvbGVdIHx8IFwic3VibWl0dGVkXCI7XHJcblxyXG4gIGF3YWl0IHVwZGF0ZURvYyhyZWYsIHtcclxuICAgIHN0YXR1czogdG8sXHJcbiAgICBsYXN0RXZlbnRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbiAgICBhcHByb3ZhbHM6IGFycmF5VW5pb24oe1xyXG4gICAgICByb2xlLFxyXG4gICAgICBkZWNpc2lvbjogXCJhcHByb3ZlZFwiLFxyXG4gICAgICBjb21tZW50OiBjb21tZW50IHx8IFwiXCIsXHJcbiAgICAgIGF0OiBub3dJU08oKSxcclxuICAgICAgYnk6IG1lKCksXHJcbiAgICB9KSxcclxuICAgIGhpc3Rvcnk6IGFycmF5VW5pb24oeyB0eXBlOiBgYXBwcm92ZWRfJHtyb2xlfWAsIGF0OiBub3dJU08oKSwgYnk6IG1lKCksIGRhdGE6IHsgY29tbWVudDogY29tbWVudCB8fCBcIlwiIH0gfSksXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWplY3RSZXF1ZXN0KGlkOiBzdHJpbmcsIHJvbGU6IE5lZWRSb2xlLCBjb21tZW50Pzogc3RyaW5nKSB7XHJcbiAgY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoKTtcclxuICBjb25zdCByZWYgPSBkb2MoZGIsIFwibmVlZFJlcXVlc3RzXCIsIGlkKTtcclxuICBhd2FpdCB1cGRhdGVEb2MocmVmLCB7XHJcbiAgICBzdGF0dXM6IFwicmVqZWN0ZWRcIixcclxuICAgIGxhc3RFdmVudEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuICAgIGFwcHJvdmFsczogYXJyYXlVbmlvbih7XHJcbiAgICAgIHJvbGUsXHJcbiAgICAgIGRlY2lzaW9uOiBcInJlamVjdGVkXCIsXHJcbiAgICAgIGNvbW1lbnQ6IGNvbW1lbnQgfHwgXCJcIixcclxuICAgICAgYXQ6IG5vd0lTTygpLFxyXG4gICAgICBieTogbWUoKSxcclxuICAgIH0pLFxyXG4gICAgaGlzdG9yeTogYXJyYXlVbmlvbih7IHR5cGU6IGByZWplY3RlZF8ke3JvbGV9YCwgYXQ6IG5vd0lTTygpLCBieTogbWUoKSwgZGF0YTogeyBjb21tZW50OiBjb21tZW50IHx8IFwiXCIgfSB9KSxcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVSZXF1ZXN0KGlkOiBzdHJpbmcsIGRldGFpbHM/OiB7IHBheW1lbnRSZWY/OiBzdHJpbmc7IG5vdGU/OiBzdHJpbmcgfSkge1xyXG4gIGNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKCk7XHJcbiAgY29uc3QgcmVmID0gZG9jKGRiLCBcIm5lZWRSZXF1ZXN0c1wiLCBpZCk7XHJcbiAgYXdhaXQgdXBkYXRlRG9jKHJlZiwge1xyXG4gICAgc3RhdHVzOiBcImZ1bGZpbGxlZFwiLFxyXG4gICAgbGFzdEV2ZW50QXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4gICAgaGlzdG9yeTogYXJyYXlVbmlvbih7IHR5cGU6IFwiZXhlY3V0ZWRcIiwgYXQ6IG5vd0lTTygpLCBieTogbWUoKSwgZGF0YTogZGV0YWlscyB8fCB7fSB9KSxcclxuICB9KTtcclxufVxyXG5cclxuLy8gQWJvbm5lbWVudHMgdGVtcHMgcsOpZWwgKFVJKVxyXG5leHBvcnQgZnVuY3Rpb24gc3Vic2NyaWJlTXlSZXF1ZXN0cyh1aWQ6IHN0cmluZywgY2I6IChkb2NzOiBOZWVkUmVxdWVzdFtdKSA9PiB2b2lkKSB7XHJcbiAgY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoKTtcclxuICBjb25zdCBxID0gcXVlcnkoXHJcbiAgICBjb2xsZWN0aW9uKGRiLCBcIm5lZWRSZXF1ZXN0c1wiKSxcclxuICAgIHdoZXJlKFwiY3JlYXRlZEJ5LnVpZFwiLCBcIj09XCIsIHVpZCksXHJcbiAgICBvcmRlckJ5KFwiY3JlYXRlZEF0XCIsIFwiZGVzY1wiKSxcclxuICApO1xyXG4gIHJldHVybiBvblNuYXBzaG90KHEsIChzbmFwKSA9PiB7XHJcbiAgICBjYihzbmFwLmRvY3MubWFwKChkKSA9PiAoeyBpZDogZC5pZCwgLi4uKGQuZGF0YSgpIGFzIGFueSkgfSkpKTtcclxuICB9LCAoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwic3Vic2NyaWJlTXlSZXF1ZXN0cyBlcnJvcjpcIiwgZXJyKTtcclxuICAgIGNiKFtdKTtcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN1YnNjcmliZVF1ZXVlRm9yUm9sZShyb2xlOiBOZWVkUm9sZSwgY2I6IChkb2NzOiBOZWVkUmVxdWVzdFtdKSA9PiB2b2lkKSB7XHJcbiAgY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoKTtcclxuICBsZXQgcVJlZjogYW55O1xyXG4gIGlmIChyb2xlID09PSBcIm1hbmFnZXJcIikge1xyXG4gICAgcVJlZiA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsIFwibmVlZFJlcXVlc3RzXCIpLCB3aGVyZShcInN0YXR1c1wiLCBcIj09XCIsIFwic3VibWl0dGVkXCIpLCBvcmRlckJ5KFwiY3JlYXRlZEF0XCIsIFwiZGVzY1wiKSk7XHJcbiAgfSBlbHNlIGlmIChyb2xlID09PSBcImFkbWluXCIpIHtcclxuICAgIHFSZWYgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCBcIm5lZWRSZXF1ZXN0c1wiKSwgd2hlcmUoXCJzdGF0dXNcIiwgXCI9PVwiLCBcIm1hbmFnZXJfYXBwcm92ZWRcIiksIG9yZGVyQnkoXCJjcmVhdGVkQXRcIiwgXCJkZXNjXCIpKTtcclxuICB9IGVsc2UgaWYgKHJvbGUgPT09IFwiZmluYW5jZVwiKSB7XHJcbiAgICBxUmVmID0gcXVlcnkoY29sbGVjdGlvbihkYiwgXCJuZWVkUmVxdWVzdHNcIiksIHdoZXJlKFwic3RhdHVzXCIsIFwiaW5cIiwgW1wiYWRtaW5fYXBwcm92ZWRcIiwgXCJmaW5hbmNlX2FwcHJvdmVkXCJdKSwgb3JkZXJCeShcImNyZWF0ZWRBdFwiLCBcImRlc2NcIikpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBxUmVmID0gcXVlcnkoY29sbGVjdGlvbihkYiwgXCJuZWVkUmVxdWVzdHNcIiksIHdoZXJlKFwic3RhdHVzXCIsIFwiPT1cIiwgXCJzdWJtaXR0ZWRcIiksIG9yZGVyQnkoXCJjcmVhdGVkQXRcIiwgXCJkZXNjXCIpKTtcclxuICB9XHJcbiAgcmV0dXJuIG9uU25hcHNob3QocVJlZiwgKHNuYXApID0+IHtcclxuICAgIGNiKHNuYXAuZG9jcy5tYXAoKGQpID0+ICh7IGlkOiBkLmlkLCAuLi4oZC5kYXRhKCkgYXMgYW55KSB9KSkpO1xyXG4gIH0sIChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJzdWJzY3JpYmVRdWV1ZUZvclJvbGUgZXJyb3I6XCIsIGVycik7XHJcbiAgICBjYihbXSk7XHJcbiAgfSk7XHJcbn0iXSwibmFtZXMiOlsiZ2V0RmlyZXN0b3JlIiwic2VydmVyVGltZXN0YW1wIiwiY29sbGVjdGlvbiIsImFkZERvYyIsImRvYyIsInVwZGF0ZURvYyIsIm9uU25hcHNob3QiLCJxdWVyeSIsIndoZXJlIiwib3JkZXJCeSIsImFycmF5VW5pb24iLCJhdXRoIiwibm93SVNPIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWUiLCJ1IiwiY3VycmVudFVzZXIiLCJ1aWQiLCJlbWFpbCIsIm5hbWUiLCJkaXNwbGF5TmFtZSIsInNwbGl0IiwiY3JlYXRlTmVlZFJlcXVlc3QiLCJpbnB1dCIsImRiIiwicmVmIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImFtb3VudCIsImN1cnJlbmN5IiwianVzdGlmaWNhdGlvbiIsImF0dGFjaG1lbnRzIiwiY3JlYXRlZEJ5IiwiY3JlYXRlZEF0IiwibGFzdEV2ZW50QXQiLCJzdGF0dXMiLCJhcHByb3ZhbHMiLCJoaXN0b3J5IiwidHlwZSIsImF0IiwiYnkiLCJkYXRhIiwiaWQiLCJzdWJtaXROZWVkUmVxdWVzdCIsImFwcHJvdmVSZXF1ZXN0Iiwicm9sZSIsImNvbW1lbnQiLCJuZXh0QnlSb2xlIiwiZW1wbG95ZWUiLCJtYW5hZ2VyIiwiYWRtaW4iLCJmaW5hbmNlIiwidG8iLCJkZWNpc2lvbiIsInJlamVjdFJlcXVlc3QiLCJleGVjdXRlUmVxdWVzdCIsImRldGFpbHMiLCJzdWJzY3JpYmVNeVJlcXVlc3RzIiwiY2IiLCJxIiwic25hcCIsImRvY3MiLCJtYXAiLCJkIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwic3Vic2NyaWJlUXVldWVGb3JSb2xlIiwicVJlZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/needs/firestore.ts\n"));

/***/ })

});